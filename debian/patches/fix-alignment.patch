--- a/src/qpid/sys/posix/SocketAddress.cpp
+++ b/src/qpid/sys/posix/SocketAddress.cpp
@@ -84,8 +84,8 @@
 uint16_t SocketAddress::getPort(::sockaddr const * const addr)
 {
     switch (addr->sa_family) {
-        case AF_INET: return ntohs(((::sockaddr_in*)(void*)addr)->sin_port);
-        case AF_INET6: return ntohs(((::sockaddr_in6*)(void*)addr)->sin6_port);
+        case AF_INET: return ntohs(((const ::sockaddr_in*)(const void*)addr)->sin_port);
+        case AF_INET6: return ntohs(((const ::sockaddr_in6*)(const void*)addr)->sin6_port);
         default:throw Exception(QPID_MSG("Unexpected socket type"));
     }
 }

--- a/src/qpid/sys/posix/Socket.cpp
+++ b/src/qpid/sys/posix/Socket.cpp
@@ -29,6 +29,7 @@
 #include <sys/types.h>
 #include <sys/socket.h>
 #include <sys/errno.h>
+#include <unistd.h>
 #include <netinet/in.h>
 #include <netinet/tcp.h>
 #include <netdb.h>
